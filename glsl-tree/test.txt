Ok(
    TranslationUnit(
        NonEmpty(
            [
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Int,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "NUM_STEPS",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        IntConst(
                                            8,
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Float,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "PI",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        FloatConst(
                                            3.141592,
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Float,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "EPSILON",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        FloatConst(
                                            0.001,
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Preprocessor(
                    Define(
                        ObjectLike {
                            ident: Identifier(
                                "EPSILON_NRM",
                            ),
                            value: "(0.1 / iResolution.x)",
                        },
                    ),
                ),
                Preprocessor(
                    Define(
                        ObjectLike {
                            ident: Identifier(
                                "AA",
                            ),
                            value: "",
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Int,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "ITER_GEOMETRY",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        IntConst(
                                            3,
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Int,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "ITER_FRAGMENT",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        IntConst(
                                            5,
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Float,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "SEA_HEIGHT",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        FloatConst(
                                            0.6,
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Float,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "SEA_CHOPPY",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        FloatConst(
                                            4.0,
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Float,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "SEA_SPEED",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        FloatConst(
                                            0.8,
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Float,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "SEA_FREQ",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        FloatConst(
                                            0.16,
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Vec3,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "SEA_BASE",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        FunCall(
                                            Identifier(
                                                Identifier(
                                                    "vec3",
                                                ),
                                            ),
                                            [
                                                FloatConst(
                                                    0.0,
                                                ),
                                                FloatConst(
                                                    0.09,
                                                ),
                                                FloatConst(
                                                    0.18,
                                                ),
                                            ],
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Vec3,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "SEA_WATER_COLOR",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        Binary(
                                            Mult,
                                            FunCall(
                                                Identifier(
                                                    Identifier(
                                                        "vec3",
                                                    ),
                                                ),
                                                [
                                                    FloatConst(
                                                        0.8,
                                                    ),
                                                    FloatConst(
                                                        0.9,
                                                    ),
                                                    FloatConst(
                                                        0.6,
                                                    ),
                                                ],
                                            ),
                                            FloatConst(
                                                0.6,
                                            ),
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                Preprocessor(
                    Define(
                        ObjectLike {
                            ident: Identifier(
                                "SEA_TIME",
                            ),
                            value: "(1.0 + iTime * SEA_SPEED)",
                        },
                    ),
                ),
                Declaration(
                    InitDeclaratorList(
                        InitDeclaratorList {
                            head: SingleDeclaration {
                                ty: FullySpecifiedType {
                                    qualifier: Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Const,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    ty: TypeSpecifier {
                                        ty: Mat2,
                                        array_specifier: None,
                                    },
                                },
                                name: Some(
                                    Identifier(
                                        "octave_m",
                                    ),
                                ),
                                array_specifier: None,
                                initializer: Some(
                                    Simple(
                                        FunCall(
                                            Identifier(
                                                Identifier(
                                                    "mat2",
                                                ),
                                            ),
                                            [
                                                FloatConst(
                                                    1.6,
                                                ),
                                                FloatConst(
                                                    1.2,
                                                ),
                                                Unary(
                                                    Minus,
                                                    FloatConst(
                                                        1.2,
                                                    ),
                                                ),
                                                FloatConst(
                                                    1.6,
                                                ),
                                            ],
                                        ),
                                    ),
                                ),
                            },
                            tail: [],
                        },
                    ),
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Mat3,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "fromEuler",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "ang",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "a1",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "vec2",
                                                                    ),
                                                                ),
                                                                [
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "sin",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            Dot(
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "ang",
                                                                                    ),
                                                                                ),
                                                                                Identifier(
                                                                                    "x",
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "cos",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            Dot(
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "ang",
                                                                                    ),
                                                                                ),
                                                                                Identifier(
                                                                                    "x",
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "a2",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "vec2",
                                                                    ),
                                                                ),
                                                                [
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "sin",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            Dot(
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "ang",
                                                                                    ),
                                                                                ),
                                                                                Identifier(
                                                                                    "y",
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "cos",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            Dot(
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "ang",
                                                                                    ),
                                                                                ),
                                                                                Identifier(
                                                                                    "y",
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "a3",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "vec2",
                                                                    ),
                                                                ),
                                                                [
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "sin",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            Dot(
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "ang",
                                                                                    ),
                                                                                ),
                                                                                Identifier(
                                                                                    "z",
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "cos",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            Dot(
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "ang",
                                                                                    ),
                                                                                ),
                                                                                Identifier(
                                                                                    "z",
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Mat3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "m",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: None,
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Bracket(
                                                    Variable(
                                                        Identifier(
                                                            "m",
                                                        ),
                                                    ),
                                                    ArraySpecifier {
                                                        dimensions: NonEmpty(
                                                            [
                                                                ExplicitlySized(
                                                                    IntConst(
                                                                        0,
                                                                    ),
                                                                ),
                                                            ],
                                                        ),
                                                    },
                                                ),
                                                Equal,
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "vec3",
                                                        ),
                                                    ),
                                                    [
                                                        Binary(
                                                            Add,
                                                            Binary(
                                                                Mult,
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a1",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "y",
                                                                    ),
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a3",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "y",
                                                                    ),
                                                                ),
                                                            ),
                                                            Binary(
                                                                Mult,
                                                                Binary(
                                                                    Mult,
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "a1",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "x",
                                                                        ),
                                                                    ),
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "a2",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "x",
                                                                        ),
                                                                    ),
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a3",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "x",
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Binary(
                                                            Add,
                                                            Binary(
                                                                Mult,
                                                                Binary(
                                                                    Mult,
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "a1",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "y",
                                                                        ),
                                                                    ),
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "a2",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "x",
                                                                        ),
                                                                    ),
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a3",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "x",
                                                                    ),
                                                                ),
                                                            ),
                                                            Binary(
                                                                Mult,
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a3",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "y",
                                                                    ),
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a1",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "x",
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Binary(
                                                            Mult,
                                                            Unary(
                                                                Minus,
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a2",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "y",
                                                                    ),
                                                                ),
                                                            ),
                                                            Dot(
                                                                Variable(
                                                                    Identifier(
                                                                        "a3",
                                                                    ),
                                                                ),
                                                                Identifier(
                                                                    "x",
                                                                ),
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Bracket(
                                                    Variable(
                                                        Identifier(
                                                            "m",
                                                        ),
                                                    ),
                                                    ArraySpecifier {
                                                        dimensions: NonEmpty(
                                                            [
                                                                ExplicitlySized(
                                                                    IntConst(
                                                                        1,
                                                                    ),
                                                                ),
                                                            ],
                                                        ),
                                                    },
                                                ),
                                                Equal,
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "vec3",
                                                        ),
                                                    ),
                                                    [
                                                        Binary(
                                                            Mult,
                                                            Unary(
                                                                Minus,
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a2",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "y",
                                                                    ),
                                                                ),
                                                            ),
                                                            Dot(
                                                                Variable(
                                                                    Identifier(
                                                                        "a1",
                                                                    ),
                                                                ),
                                                                Identifier(
                                                                    "x",
                                                                ),
                                                            ),
                                                        ),
                                                        Binary(
                                                            Mult,
                                                            Dot(
                                                                Variable(
                                                                    Identifier(
                                                                        "a1",
                                                                    ),
                                                                ),
                                                                Identifier(
                                                                    "y",
                                                                ),
                                                            ),
                                                            Dot(
                                                                Variable(
                                                                    Identifier(
                                                                        "a2",
                                                                    ),
                                                                ),
                                                                Identifier(
                                                                    "y",
                                                                ),
                                                            ),
                                                        ),
                                                        Dot(
                                                            Variable(
                                                                Identifier(
                                                                    "a2",
                                                                ),
                                                            ),
                                                            Identifier(
                                                                "x",
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Bracket(
                                                    Variable(
                                                        Identifier(
                                                            "m",
                                                        ),
                                                    ),
                                                    ArraySpecifier {
                                                        dimensions: NonEmpty(
                                                            [
                                                                ExplicitlySized(
                                                                    IntConst(
                                                                        2,
                                                                    ),
                                                                ),
                                                            ],
                                                        ),
                                                    },
                                                ),
                                                Equal,
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "vec3",
                                                        ),
                                                    ),
                                                    [
                                                        Binary(
                                                            Add,
                                                            Binary(
                                                                Mult,
                                                                Binary(
                                                                    Mult,
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "a3",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "y",
                                                                        ),
                                                                    ),
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "a1",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "x",
                                                                        ),
                                                                    ),
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a2",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "x",
                                                                    ),
                                                                ),
                                                            ),
                                                            Binary(
                                                                Mult,
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a1",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "y",
                                                                    ),
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a3",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "x",
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Binary(
                                                            Sub,
                                                            Binary(
                                                                Mult,
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a1",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "x",
                                                                    ),
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a3",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "x",
                                                                    ),
                                                                ),
                                                            ),
                                                            Binary(
                                                                Mult,
                                                                Binary(
                                                                    Mult,
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "a1",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "y",
                                                                        ),
                                                                    ),
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "a3",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "y",
                                                                        ),
                                                                    ),
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "a2",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "x",
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Binary(
                                                            Mult,
                                                            Dot(
                                                                Variable(
                                                                    Identifier(
                                                                        "a2",
                                                                    ),
                                                                ),
                                                                Identifier(
                                                                    "y",
                                                                ),
                                                            ),
                                                            Dot(
                                                                Variable(
                                                                    Identifier(
                                                                        "a3",
                                                                    ),
                                                                ),
                                                                Identifier(
                                                                    "y",
                                                                ),
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                Variable(
                                                    Identifier(
                                                        "m",
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Float,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "hash",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec2,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "p",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "h",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "dot",
                                                                    ),
                                                                ),
                                                                [
                                                                    Variable(
                                                                        Identifier(
                                                                            "p",
                                                                        ),
                                                                    ),
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "vec2",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            FloatConst(
                                                                                127.1,
                                                                            ),
                                                                            FloatConst(
                                                                                311.7,
                                                                            ),
                                                                        ],
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "fract",
                                                        ),
                                                    ),
                                                    [
                                                        Binary(
                                                            Mult,
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "sin",
                                                                    ),
                                                                ),
                                                                [
                                                                    Variable(
                                                                        Identifier(
                                                                            "h",
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                            FloatConst(
                                                                43758.547,
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Float,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "noise",
                            ),
                            parameters: [
                                Named(
                                    Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        In,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec2,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "p",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "i",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "floor",
                                                                    ),
                                                                ),
                                                                [
                                                                    Variable(
                                                                        Identifier(
                                                                            "p",
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "f",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "fract",
                                                                    ),
                                                                ),
                                                                [
                                                                    Variable(
                                                                        Identifier(
                                                                            "p",
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "u",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Binary(
                                                                Mult,
                                                                Binary(
                                                                    Mult,
                                                                    Variable(
                                                                        Identifier(
                                                                            "f",
                                                                        ),
                                                                    ),
                                                                    Variable(
                                                                        Identifier(
                                                                            "f",
                                                                        ),
                                                                    ),
                                                                ),
                                                                Binary(
                                                                    Sub,
                                                                    FloatConst(
                                                                        3.0,
                                                                    ),
                                                                    Binary(
                                                                        Mult,
                                                                        FloatConst(
                                                                            2.0,
                                                                        ),
                                                                        Variable(
                                                                            Identifier(
                                                                                "f",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                Binary(
                                                    Add,
                                                    Unary(
                                                        Minus,
                                                        FloatConst(
                                                            1.0,
                                                        ),
                                                    ),
                                                    Binary(
                                                        Mult,
                                                        FloatConst(
                                                            2.0,
                                                        ),
                                                        FunCall(
                                                            Identifier(
                                                                Identifier(
                                                                    "mix",
                                                                ),
                                                            ),
                                                            [
                                                                FunCall(
                                                                    Identifier(
                                                                        Identifier(
                                                                            "mix",
                                                                        ),
                                                                    ),
                                                                    [
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "hash",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Binary(
                                                                                    Add,
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "i",
                                                                                        ),
                                                                                    ),
                                                                                    FunCall(
                                                                                        Identifier(
                                                                                            Identifier(
                                                                                                "vec2",
                                                                                            ),
                                                                                        ),
                                                                                        [
                                                                                            FloatConst(
                                                                                                0.0,
                                                                                            ),
                                                                                            FloatConst(
                                                                                                0.0,
                                                                                            ),
                                                                                        ],
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "hash",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Binary(
                                                                                    Add,
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "i",
                                                                                        ),
                                                                                    ),
                                                                                    FunCall(
                                                                                        Identifier(
                                                                                            Identifier(
                                                                                                "vec2",
                                                                                            ),
                                                                                        ),
                                                                                        [
                                                                                            FloatConst(
                                                                                                1.0,
                                                                                            ),
                                                                                            FloatConst(
                                                                                                0.0,
                                                                                            ),
                                                                                        ],
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                        Dot(
                                                                            Variable(
                                                                                Identifier(
                                                                                    "u",
                                                                                ),
                                                                            ),
                                                                            Identifier(
                                                                                "x",
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                                FunCall(
                                                                    Identifier(
                                                                        Identifier(
                                                                            "mix",
                                                                        ),
                                                                    ),
                                                                    [
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "hash",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Binary(
                                                                                    Add,
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "i",
                                                                                        ),
                                                                                    ),
                                                                                    FunCall(
                                                                                        Identifier(
                                                                                            Identifier(
                                                                                                "vec2",
                                                                                            ),
                                                                                        ),
                                                                                        [
                                                                                            FloatConst(
                                                                                                0.0,
                                                                                            ),
                                                                                            FloatConst(
                                                                                                1.0,
                                                                                            ),
                                                                                        ],
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "hash",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Binary(
                                                                                    Add,
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "i",
                                                                                        ),
                                                                                    ),
                                                                                    FunCall(
                                                                                        Identifier(
                                                                                            Identifier(
                                                                                                "vec2",
                                                                                            ),
                                                                                        ),
                                                                                        [
                                                                                            FloatConst(
                                                                                                1.0,
                                                                                            ),
                                                                                            FloatConst(
                                                                                                1.0,
                                                                                            ),
                                                                                        ],
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                        Dot(
                                                                            Variable(
                                                                                Identifier(
                                                                                    "u",
                                                                                ),
                                                                            ),
                                                                            Identifier(
                                                                                "x",
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "u",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "y",
                                                                    ),
                                                                ),
                                                            ],
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Float,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "diffuse",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "n",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "l",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Float,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "p",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "pow",
                                                        ),
                                                    ),
                                                    [
                                                        Binary(
                                                            Add,
                                                            Binary(
                                                                Mult,
                                                                FunCall(
                                                                    Identifier(
                                                                        Identifier(
                                                                            "dot",
                                                                        ),
                                                                    ),
                                                                    [
                                                                        Variable(
                                                                            Identifier(
                                                                                "n",
                                                                            ),
                                                                        ),
                                                                        Variable(
                                                                            Identifier(
                                                                                "l",
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                                FloatConst(
                                                                    0.4,
                                                                ),
                                                            ),
                                                            FloatConst(
                                                                0.6,
                                                            ),
                                                        ),
                                                        Variable(
                                                            Identifier(
                                                                "p",
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Float,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "specular",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "n",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "l",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "e",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Float,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "s",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "nrm",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Binary(
                                                                Div,
                                                                Binary(
                                                                    Add,
                                                                    Variable(
                                                                        Identifier(
                                                                            "s",
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        8.0,
                                                                    ),
                                                                ),
                                                                Binary(
                                                                    Mult,
                                                                    Variable(
                                                                        Identifier(
                                                                            "PI",
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        8.0,
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                Binary(
                                                    Mult,
                                                    FunCall(
                                                        Identifier(
                                                            Identifier(
                                                                "pow",
                                                            ),
                                                        ),
                                                        [
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "max",
                                                                    ),
                                                                ),
                                                                [
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "dot",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            FunCall(
                                                                                Identifier(
                                                                                    Identifier(
                                                                                        "reflect",
                                                                                    ),
                                                                                ),
                                                                                [
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "e",
                                                                                        ),
                                                                                    ),
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "n",
                                                                                        ),
                                                                                    ),
                                                                                ],
                                                                            ),
                                                                            Variable(
                                                                                Identifier(
                                                                                    "l",
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                    FloatConst(
                                                                        0.0,
                                                                    ),
                                                                ],
                                                            ),
                                                            Variable(
                                                                Identifier(
                                                                    "s",
                                                                ),
                                                            ),
                                                        ],
                                                    ),
                                                    Variable(
                                                        Identifier(
                                                            "nrm",
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Vec3,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "getSkyColor",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "e",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Dot(
                                                    Variable(
                                                        Identifier(
                                                            "e",
                                                        ),
                                                    ),
                                                    Identifier(
                                                        "y",
                                                    ),
                                                ),
                                                Equal,
                                                Binary(
                                                    Mult,
                                                    Binary(
                                                        Add,
                                                        Binary(
                                                            Mult,
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "max",
                                                                    ),
                                                                ),
                                                                [
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "e",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "y",
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        0.0,
                                                                    ),
                                                                ],
                                                            ),
                                                            FloatConst(
                                                                0.8,
                                                            ),
                                                        ),
                                                        FloatConst(
                                                            0.2,
                                                        ),
                                                    ),
                                                    FloatConst(
                                                        0.8,
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                Binary(
                                                    Mult,
                                                    FunCall(
                                                        Identifier(
                                                            Identifier(
                                                                "vec3",
                                                            ),
                                                        ),
                                                        [
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "pow",
                                                                    ),
                                                                ),
                                                                [
                                                                    Binary(
                                                                        Sub,
                                                                        FloatConst(
                                                                            1.0,
                                                                        ),
                                                                        Dot(
                                                                            Variable(
                                                                                Identifier(
                                                                                    "e",
                                                                                ),
                                                                            ),
                                                                            Identifier(
                                                                                "y",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        2.0,
                                                                    ),
                                                                ],
                                                            ),
                                                            Binary(
                                                                Sub,
                                                                FloatConst(
                                                                    1.0,
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "e",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "y",
                                                                    ),
                                                                ),
                                                            ),
                                                            Binary(
                                                                Add,
                                                                FloatConst(
                                                                    0.6,
                                                                ),
                                                                Binary(
                                                                    Mult,
                                                                    Binary(
                                                                        Sub,
                                                                        FloatConst(
                                                                            1.0,
                                                                        ),
                                                                        Dot(
                                                                            Variable(
                                                                                Identifier(
                                                                                    "e",
                                                                                ),
                                                                            ),
                                                                            Identifier(
                                                                                "y",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        0.4,
                                                                    ),
                                                                ),
                                                            ),
                                                        ],
                                                    ),
                                                    FloatConst(
                                                        1.1,
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Float,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "sea_octave",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec2,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "uv",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Float,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "choppy",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Variable(
                                                    Identifier(
                                                        "uv",
                                                    ),
                                                ),
                                                Add,
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "noise",
                                                        ),
                                                    ),
                                                    [
                                                        Variable(
                                                            Identifier(
                                                                "uv",
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "wv",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Binary(
                                                                Sub,
                                                                FloatConst(
                                                                    1.0,
                                                                ),
                                                                FunCall(
                                                                    Identifier(
                                                                        Identifier(
                                                                            "abs",
                                                                        ),
                                                                    ),
                                                                    [
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "sin",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "uv",
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ],
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "swv",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "abs",
                                                                    ),
                                                                ),
                                                                [
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "cos",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            Variable(
                                                                                Identifier(
                                                                                    "uv",
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Variable(
                                                    Identifier(
                                                        "wv",
                                                    ),
                                                ),
                                                Equal,
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "mix",
                                                        ),
                                                    ),
                                                    [
                                                        Variable(
                                                            Identifier(
                                                                "wv",
                                                            ),
                                                        ),
                                                        Variable(
                                                            Identifier(
                                                                "swv",
                                                            ),
                                                        ),
                                                        Variable(
                                                            Identifier(
                                                                "wv",
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "pow",
                                                        ),
                                                    ),
                                                    [
                                                        Binary(
                                                            Sub,
                                                            FloatConst(
                                                                1.0,
                                                            ),
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "pow",
                                                                    ),
                                                                ),
                                                                [
                                                                    Binary(
                                                                        Mult,
                                                                        Dot(
                                                                            Variable(
                                                                                Identifier(
                                                                                    "wv",
                                                                                ),
                                                                            ),
                                                                            Identifier(
                                                                                "x",
                                                                            ),
                                                                        ),
                                                                        Dot(
                                                                            Variable(
                                                                                Identifier(
                                                                                    "wv",
                                                                                ),
                                                                            ),
                                                                            Identifier(
                                                                                "y",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        0.65,
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                        Variable(
                                                            Identifier(
                                                                "choppy",
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Float,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "map",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "p",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "freq",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Variable(
                                                                Identifier(
                                                                    "SEA_FREQ",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "amp",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Variable(
                                                                Identifier(
                                                                    "SEA_HEIGHT",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "choppy",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Variable(
                                                                Identifier(
                                                                    "SEA_CHOPPY",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "uv",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Dot(
                                                                Variable(
                                                                    Identifier(
                                                                        "p",
                                                                    ),
                                                                ),
                                                                Identifier(
                                                                    "xz",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Dot(
                                                    Variable(
                                                        Identifier(
                                                            "uv",
                                                        ),
                                                    ),
                                                    Identifier(
                                                        "x",
                                                    ),
                                                ),
                                                Mult,
                                                FloatConst(
                                                    0.75,
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "d",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: None,
                                                },
                                                tail: [
                                                    SingleDeclarationNoType {
                                                        ident: ArrayedIdentifier {
                                                            ident: Identifier(
                                                                "h",
                                                            ),
                                                            array_spec: None,
                                                        },
                                                        initializer: Some(
                                                            Simple(
                                                                FloatConst(
                                                                    0.0,
                                                                ),
                                                            ),
                                                        ),
                                                    },
                                                ],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Iteration(
                                        For(
                                            Declaration(
                                                InitDeclaratorList(
                                                    InitDeclaratorList {
                                                        head: SingleDeclaration {
                                                            ty: FullySpecifiedType {
                                                                qualifier: None,
                                                                ty: TypeSpecifier {
                                                                    ty: Int,
                                                                    array_specifier: None,
                                                                },
                                                            },
                                                            name: Some(
                                                                Identifier(
                                                                    "i",
                                                                ),
                                                            ),
                                                            array_specifier: None,
                                                            initializer: Some(
                                                                Simple(
                                                                    IntConst(
                                                                        0,
                                                                    ),
                                                                ),
                                                            ),
                                                        },
                                                        tail: [],
                                                    },
                                                ),
                                            ),
                                            ForRestStatement {
                                                condition: Some(
                                                    Expr(
                                                        Binary(
                                                            LT,
                                                            Variable(
                                                                Identifier(
                                                                    "i",
                                                                ),
                                                            ),
                                                            Variable(
                                                                Identifier(
                                                                    "ITER_GEOMETRY",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                ),
                                                post_expr: Some(
                                                    PostInc(
                                                        Variable(
                                                            Identifier(
                                                                "i",
                                                            ),
                                                        ),
                                                    ),
                                                ),
                                            },
                                            Compound(
                                                CompoundStatement {
                                                    statement_list: [
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "d",
                                                                            ),
                                                                        ),
                                                                        Equal,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "sea_octave",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Binary(
                                                                                    Mult,
                                                                                    Binary(
                                                                                        Add,
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "uv",
                                                                                            ),
                                                                                        ),
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "SEA_TIME",
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "freq",
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "choppy",
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "d",
                                                                            ),
                                                                        ),
                                                                        Add,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "sea_octave",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Binary(
                                                                                    Mult,
                                                                                    Binary(
                                                                                        Sub,
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "uv",
                                                                                            ),
                                                                                        ),
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "SEA_TIME",
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "freq",
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "choppy",
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "h",
                                                                            ),
                                                                        ),
                                                                        Add,
                                                                        Binary(
                                                                            Mult,
                                                                            Variable(
                                                                                Identifier(
                                                                                    "d",
                                                                                ),
                                                                            ),
                                                                            Variable(
                                                                                Identifier(
                                                                                    "amp",
                                                                                ),
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "uv",
                                                                            ),
                                                                        ),
                                                                        Mult,
                                                                        Variable(
                                                                            Identifier(
                                                                                "octave_m",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "freq",
                                                                            ),
                                                                        ),
                                                                        Mult,
                                                                        FloatConst(
                                                                            1.9,
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "amp",
                                                                            ),
                                                                        ),
                                                                        Mult,
                                                                        FloatConst(
                                                                            0.22,
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "choppy",
                                                                            ),
                                                                        ),
                                                                        Equal,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "mix",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "choppy",
                                                                                    ),
                                                                                ),
                                                                                FloatConst(
                                                                                    1.0,
                                                                                ),
                                                                                FloatConst(
                                                                                    0.2,
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ],
                                                },
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                Binary(
                                                    Sub,
                                                    Dot(
                                                        Variable(
                                                            Identifier(
                                                                "p",
                                                            ),
                                                        ),
                                                        Identifier(
                                                            "y",
                                                        ),
                                                    ),
                                                    Variable(
                                                        Identifier(
                                                            "h",
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Float,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "map_detailed",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "p",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "freq",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Variable(
                                                                Identifier(
                                                                    "SEA_FREQ",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "amp",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Variable(
                                                                Identifier(
                                                                    "SEA_HEIGHT",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "choppy",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Variable(
                                                                Identifier(
                                                                    "SEA_CHOPPY",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "uv",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Dot(
                                                                Variable(
                                                                    Identifier(
                                                                        "p",
                                                                    ),
                                                                ),
                                                                Identifier(
                                                                    "xz",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Dot(
                                                    Variable(
                                                        Identifier(
                                                            "uv",
                                                        ),
                                                    ),
                                                    Identifier(
                                                        "x",
                                                    ),
                                                ),
                                                Mult,
                                                FloatConst(
                                                    0.75,
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "d",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: None,
                                                },
                                                tail: [
                                                    SingleDeclarationNoType {
                                                        ident: ArrayedIdentifier {
                                                            ident: Identifier(
                                                                "h",
                                                            ),
                                                            array_spec: None,
                                                        },
                                                        initializer: Some(
                                                            Simple(
                                                                FloatConst(
                                                                    0.0,
                                                                ),
                                                            ),
                                                        ),
                                                    },
                                                ],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Iteration(
                                        For(
                                            Declaration(
                                                InitDeclaratorList(
                                                    InitDeclaratorList {
                                                        head: SingleDeclaration {
                                                            ty: FullySpecifiedType {
                                                                qualifier: None,
                                                                ty: TypeSpecifier {
                                                                    ty: Int,
                                                                    array_specifier: None,
                                                                },
                                                            },
                                                            name: Some(
                                                                Identifier(
                                                                    "i",
                                                                ),
                                                            ),
                                                            array_specifier: None,
                                                            initializer: Some(
                                                                Simple(
                                                                    IntConst(
                                                                        0,
                                                                    ),
                                                                ),
                                                            ),
                                                        },
                                                        tail: [],
                                                    },
                                                ),
                                            ),
                                            ForRestStatement {
                                                condition: Some(
                                                    Expr(
                                                        Binary(
                                                            LT,
                                                            Variable(
                                                                Identifier(
                                                                    "i",
                                                                ),
                                                            ),
                                                            Variable(
                                                                Identifier(
                                                                    "ITER_FRAGMENT",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                ),
                                                post_expr: Some(
                                                    PostInc(
                                                        Variable(
                                                            Identifier(
                                                                "i",
                                                            ),
                                                        ),
                                                    ),
                                                ),
                                            },
                                            Compound(
                                                CompoundStatement {
                                                    statement_list: [
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "d",
                                                                            ),
                                                                        ),
                                                                        Equal,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "sea_octave",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Binary(
                                                                                    Mult,
                                                                                    Binary(
                                                                                        Add,
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "uv",
                                                                                            ),
                                                                                        ),
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "SEA_TIME",
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "freq",
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "choppy",
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "d",
                                                                            ),
                                                                        ),
                                                                        Add,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "sea_octave",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Binary(
                                                                                    Mult,
                                                                                    Binary(
                                                                                        Sub,
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "uv",
                                                                                            ),
                                                                                        ),
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "SEA_TIME",
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "freq",
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "choppy",
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "h",
                                                                            ),
                                                                        ),
                                                                        Add,
                                                                        Binary(
                                                                            Mult,
                                                                            Variable(
                                                                                Identifier(
                                                                                    "d",
                                                                                ),
                                                                            ),
                                                                            Variable(
                                                                                Identifier(
                                                                                    "amp",
                                                                                ),
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "uv",
                                                                            ),
                                                                        ),
                                                                        Mult,
                                                                        Variable(
                                                                            Identifier(
                                                                                "octave_m",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "freq",
                                                                            ),
                                                                        ),
                                                                        Mult,
                                                                        FloatConst(
                                                                            1.9,
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "amp",
                                                                            ),
                                                                        ),
                                                                        Mult,
                                                                        FloatConst(
                                                                            0.22,
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "choppy",
                                                                            ),
                                                                        ),
                                                                        Equal,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "mix",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "choppy",
                                                                                    ),
                                                                                ),
                                                                                FloatConst(
                                                                                    1.0,
                                                                                ),
                                                                                FloatConst(
                                                                                    0.2,
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ],
                                                },
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                Binary(
                                                    Sub,
                                                    Dot(
                                                        Variable(
                                                            Identifier(
                                                                "p",
                                                            ),
                                                        ),
                                                        Identifier(
                                                            "y",
                                                        ),
                                                    ),
                                                    Variable(
                                                        Identifier(
                                                            "h",
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Vec3,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "getSeaColor",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "p",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "n",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "l",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "eye",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "dist",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "fresnel",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "clamp",
                                                                    ),
                                                                ),
                                                                [
                                                                    Binary(
                                                                        Sub,
                                                                        FloatConst(
                                                                            1.0,
                                                                        ),
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "dot",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "n",
                                                                                    ),
                                                                                ),
                                                                                Unary(
                                                                                    Minus,
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "eye",
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        0.0,
                                                                    ),
                                                                    FloatConst(
                                                                        1.0,
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Variable(
                                                    Identifier(
                                                        "fresnel",
                                                    ),
                                                ),
                                                Equal,
                                                Binary(
                                                    Mult,
                                                    FunCall(
                                                        Identifier(
                                                            Identifier(
                                                                "pow",
                                                            ),
                                                        ),
                                                        [
                                                            Variable(
                                                                Identifier(
                                                                    "fresnel",
                                                                ),
                                                            ),
                                                            FloatConst(
                                                                3.0,
                                                            ),
                                                        ],
                                                    ),
                                                    FloatConst(
                                                        0.5,
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "reflected",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "getSkyColor",
                                                                    ),
                                                                ),
                                                                [
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "reflect",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            Variable(
                                                                                Identifier(
                                                                                    "eye",
                                                                                ),
                                                                            ),
                                                                            Variable(
                                                                                Identifier(
                                                                                    "n",
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "refracted",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Binary(
                                                                Add,
                                                                Variable(
                                                                    Identifier(
                                                                        "SEA_BASE",
                                                                    ),
                                                                ),
                                                                Binary(
                                                                    Mult,
                                                                    Binary(
                                                                        Mult,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "diffuse",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "n",
                                                                                    ),
                                                                                ),
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "l",
                                                                                    ),
                                                                                ),
                                                                                FloatConst(
                                                                                    80.0,
                                                                                ),
                                                                            ],
                                                                        ),
                                                                        Variable(
                                                                            Identifier(
                                                                                "SEA_WATER_COLOR",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        0.12,
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "color",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "mix",
                                                                    ),
                                                                ),
                                                                [
                                                                    Variable(
                                                                        Identifier(
                                                                            "refracted",
                                                                        ),
                                                                    ),
                                                                    Variable(
                                                                        Identifier(
                                                                            "reflected",
                                                                        ),
                                                                    ),
                                                                    Variable(
                                                                        Identifier(
                                                                            "fresnel",
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "atten",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "max",
                                                                    ),
                                                                ),
                                                                [
                                                                    Binary(
                                                                        Sub,
                                                                        FloatConst(
                                                                            1.0,
                                                                        ),
                                                                        Binary(
                                                                            Mult,
                                                                            FunCall(
                                                                                Identifier(
                                                                                    Identifier(
                                                                                        "dot",
                                                                                    ),
                                                                                ),
                                                                                [
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "dist",
                                                                                        ),
                                                                                    ),
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "dist",
                                                                                        ),
                                                                                    ),
                                                                                ],
                                                                            ),
                                                                            FloatConst(
                                                                                0.001,
                                                                            ),
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        0.0,
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Variable(
                                                    Identifier(
                                                        "color",
                                                    ),
                                                ),
                                                Add,
                                                Binary(
                                                    Mult,
                                                    Binary(
                                                        Mult,
                                                        Binary(
                                                            Mult,
                                                            Variable(
                                                                Identifier(
                                                                    "SEA_WATER_COLOR",
                                                                ),
                                                            ),
                                                            Binary(
                                                                Sub,
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "p",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "y",
                                                                    ),
                                                                ),
                                                                Variable(
                                                                    Identifier(
                                                                        "SEA_HEIGHT",
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        FloatConst(
                                                            0.18,
                                                        ),
                                                    ),
                                                    Variable(
                                                        Identifier(
                                                            "atten",
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Variable(
                                                    Identifier(
                                                        "color",
                                                    ),
                                                ),
                                                Add,
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "vec3",
                                                        ),
                                                    ),
                                                    [
                                                        FunCall(
                                                            Identifier(
                                                                Identifier(
                                                                    "specular",
                                                                ),
                                                            ),
                                                            [
                                                                Variable(
                                                                    Identifier(
                                                                        "n",
                                                                    ),
                                                                ),
                                                                Variable(
                                                                    Identifier(
                                                                        "l",
                                                                    ),
                                                                ),
                                                                Variable(
                                                                    Identifier(
                                                                        "eye",
                                                                    ),
                                                                ),
                                                                FloatConst(
                                                                    60.0,
                                                                ),
                                                            ],
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                Variable(
                                                    Identifier(
                                                        "color",
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Vec3,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "getNormal",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "p",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Float,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "eps",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "n",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: None,
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Dot(
                                                    Variable(
                                                        Identifier(
                                                            "n",
                                                        ),
                                                    ),
                                                    Identifier(
                                                        "y",
                                                    ),
                                                ),
                                                Equal,
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "map_detailed",
                                                        ),
                                                    ),
                                                    [
                                                        Variable(
                                                            Identifier(
                                                                "p",
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Dot(
                                                    Variable(
                                                        Identifier(
                                                            "n",
                                                        ),
                                                    ),
                                                    Identifier(
                                                        "x",
                                                    ),
                                                ),
                                                Equal,
                                                Binary(
                                                    Sub,
                                                    FunCall(
                                                        Identifier(
                                                            Identifier(
                                                                "map_detailed",
                                                            ),
                                                        ),
                                                        [
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "vec3",
                                                                    ),
                                                                ),
                                                                [
                                                                    Binary(
                                                                        Add,
                                                                        Dot(
                                                                            Variable(
                                                                                Identifier(
                                                                                    "p",
                                                                                ),
                                                                            ),
                                                                            Identifier(
                                                                                "x",
                                                                            ),
                                                                        ),
                                                                        Variable(
                                                                            Identifier(
                                                                                "eps",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "p",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "y",
                                                                        ),
                                                                    ),
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "p",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "z",
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ],
                                                    ),
                                                    Dot(
                                                        Variable(
                                                            Identifier(
                                                                "n",
                                                            ),
                                                        ),
                                                        Identifier(
                                                            "y",
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Dot(
                                                    Variable(
                                                        Identifier(
                                                            "n",
                                                        ),
                                                    ),
                                                    Identifier(
                                                        "z",
                                                    ),
                                                ),
                                                Equal,
                                                Binary(
                                                    Sub,
                                                    FunCall(
                                                        Identifier(
                                                            Identifier(
                                                                "map_detailed",
                                                            ),
                                                        ),
                                                        [
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "vec3",
                                                                    ),
                                                                ),
                                                                [
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "p",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "x",
                                                                        ),
                                                                    ),
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "p",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "y",
                                                                        ),
                                                                    ),
                                                                    Binary(
                                                                        Add,
                                                                        Dot(
                                                                            Variable(
                                                                                Identifier(
                                                                                    "p",
                                                                                ),
                                                                            ),
                                                                            Identifier(
                                                                                "z",
                                                                            ),
                                                                        ),
                                                                        Variable(
                                                                            Identifier(
                                                                                "eps",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ],
                                                    ),
                                                    Dot(
                                                        Variable(
                                                            Identifier(
                                                                "n",
                                                            ),
                                                        ),
                                                        Identifier(
                                                            "y",
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Dot(
                                                    Variable(
                                                        Identifier(
                                                            "n",
                                                        ),
                                                    ),
                                                    Identifier(
                                                        "y",
                                                    ),
                                                ),
                                                Equal,
                                                Variable(
                                                    Identifier(
                                                        "eps",
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "normalize",
                                                        ),
                                                    ),
                                                    [
                                                        Variable(
                                                            Identifier(
                                                                "n",
                                                            ),
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Float,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "heightMapTracing",
                            ),
                            parameters: [
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "ori",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "dir",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Out,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec3,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "p",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "tm",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FloatConst(
                                                                0.0,
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "tx",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FloatConst(
                                                                1000.0,
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "hx",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "map",
                                                                    ),
                                                                ),
                                                                [
                                                                    Binary(
                                                                        Add,
                                                                        Variable(
                                                                            Identifier(
                                                                                "ori",
                                                                            ),
                                                                        ),
                                                                        Binary(
                                                                            Mult,
                                                                            Variable(
                                                                                Identifier(
                                                                                    "dir",
                                                                                ),
                                                                            ),
                                                                            Variable(
                                                                                Identifier(
                                                                                    "tx",
                                                                                ),
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Selection(
                                        SelectionStatement {
                                            cond: Binary(
                                                GT,
                                                Variable(
                                                    Identifier(
                                                        "hx",
                                                    ),
                                                ),
                                                FloatConst(
                                                    0.0,
                                                ),
                                            ),
                                            rest: Statement(
                                                Simple(
                                                    Jump(
                                                        Return(
                                                            Some(
                                                                Variable(
                                                                    Identifier(
                                                                        "tx",
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "hm",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "map",
                                                                    ),
                                                                ),
                                                                [
                                                                    Binary(
                                                                        Add,
                                                                        Variable(
                                                                            Identifier(
                                                                                "ori",
                                                                            ),
                                                                        ),
                                                                        Binary(
                                                                            Mult,
                                                                            Variable(
                                                                                Identifier(
                                                                                    "dir",
                                                                                ),
                                                                            ),
                                                                            Variable(
                                                                                Identifier(
                                                                                    "tm",
                                                                                ),
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "tmid",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FloatConst(
                                                                0.0,
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Iteration(
                                        For(
                                            Declaration(
                                                InitDeclaratorList(
                                                    InitDeclaratorList {
                                                        head: SingleDeclaration {
                                                            ty: FullySpecifiedType {
                                                                qualifier: None,
                                                                ty: TypeSpecifier {
                                                                    ty: Int,
                                                                    array_specifier: None,
                                                                },
                                                            },
                                                            name: Some(
                                                                Identifier(
                                                                    "i",
                                                                ),
                                                            ),
                                                            array_specifier: None,
                                                            initializer: Some(
                                                                Simple(
                                                                    IntConst(
                                                                        0,
                                                                    ),
                                                                ),
                                                            ),
                                                        },
                                                        tail: [],
                                                    },
                                                ),
                                            ),
                                            ForRestStatement {
                                                condition: Some(
                                                    Expr(
                                                        Binary(
                                                            LT,
                                                            Variable(
                                                                Identifier(
                                                                    "i",
                                                                ),
                                                            ),
                                                            Variable(
                                                                Identifier(
                                                                    "NUM_STEPS",
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                ),
                                                post_expr: Some(
                                                    PostInc(
                                                        Variable(
                                                            Identifier(
                                                                "i",
                                                            ),
                                                        ),
                                                    ),
                                                ),
                                            },
                                            Compound(
                                                CompoundStatement {
                                                    statement_list: [
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "tmid",
                                                                            ),
                                                                        ),
                                                                        Equal,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "mix",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "tm",
                                                                                    ),
                                                                                ),
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "tx",
                                                                                    ),
                                                                                ),
                                                                                Binary(
                                                                                    Div,
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "hm",
                                                                                        ),
                                                                                    ),
                                                                                    Binary(
                                                                                        Sub,
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "hm",
                                                                                            ),
                                                                                        ),
                                                                                        Variable(
                                                                                            Identifier(
                                                                                                "hx",
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Expression(
                                                                Some(
                                                                    Assignment(
                                                                        Variable(
                                                                            Identifier(
                                                                                "p",
                                                                            ),
                                                                        ),
                                                                        Equal,
                                                                        Binary(
                                                                            Add,
                                                                            Variable(
                                                                                Identifier(
                                                                                    "ori",
                                                                                ),
                                                                            ),
                                                                            Binary(
                                                                                Mult,
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "dir",
                                                                                    ),
                                                                                ),
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "tmid",
                                                                                    ),
                                                                                ),
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Declaration(
                                                                InitDeclaratorList(
                                                                    InitDeclaratorList {
                                                                        head: SingleDeclaration {
                                                                            ty: FullySpecifiedType {
                                                                                qualifier: None,
                                                                                ty: TypeSpecifier {
                                                                                    ty: Float,
                                                                                    array_specifier: None,
                                                                                },
                                                                            },
                                                                            name: Some(
                                                                                Identifier(
                                                                                    "hmid",
                                                                                ),
                                                                            ),
                                                                            array_specifier: None,
                                                                            initializer: Some(
                                                                                Simple(
                                                                                    FunCall(
                                                                                        Identifier(
                                                                                            Identifier(
                                                                                                "map",
                                                                                            ),
                                                                                        ),
                                                                                        [
                                                                                            Variable(
                                                                                                Identifier(
                                                                                                    "p",
                                                                                                ),
                                                                                            ),
                                                                                        ],
                                                                                    ),
                                                                                ),
                                                                            ),
                                                                        },
                                                                        tail: [],
                                                                    },
                                                                ),
                                                            ),
                                                        ),
                                                        Simple(
                                                            Selection(
                                                                SelectionStatement {
                                                                    cond: Binary(
                                                                        LT,
                                                                        Variable(
                                                                            Identifier(
                                                                                "hmid",
                                                                            ),
                                                                        ),
                                                                        FloatConst(
                                                                            0.0,
                                                                        ),
                                                                    ),
                                                                    rest: Else(
                                                                        Compound(
                                                                            CompoundStatement {
                                                                                statement_list: [
                                                                                    Simple(
                                                                                        Expression(
                                                                                            Some(
                                                                                                Assignment(
                                                                                                    Variable(
                                                                                                        Identifier(
                                                                                                            "tx",
                                                                                                        ),
                                                                                                    ),
                                                                                                    Equal,
                                                                                                    Variable(
                                                                                                        Identifier(
                                                                                                            "tmid",
                                                                                                        ),
                                                                                                    ),
                                                                                                ),
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                    Simple(
                                                                                        Expression(
                                                                                            Some(
                                                                                                Assignment(
                                                                                                    Variable(
                                                                                                        Identifier(
                                                                                                            "hx",
                                                                                                        ),
                                                                                                    ),
                                                                                                    Equal,
                                                                                                    Variable(
                                                                                                        Identifier(
                                                                                                            "hmid",
                                                                                                        ),
                                                                                                    ),
                                                                                                ),
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                ],
                                                                            },
                                                                        ),
                                                                        Compound(
                                                                            CompoundStatement {
                                                                                statement_list: [
                                                                                    Simple(
                                                                                        Expression(
                                                                                            Some(
                                                                                                Assignment(
                                                                                                    Variable(
                                                                                                        Identifier(
                                                                                                            "tm",
                                                                                                        ),
                                                                                                    ),
                                                                                                    Equal,
                                                                                                    Variable(
                                                                                                        Identifier(
                                                                                                            "tmid",
                                                                                                        ),
                                                                                                    ),
                                                                                                ),
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                    Simple(
                                                                                        Expression(
                                                                                            Some(
                                                                                                Assignment(
                                                                                                    Variable(
                                                                                                        Identifier(
                                                                                                            "hm",
                                                                                                        ),
                                                                                                    ),
                                                                                                    Equal,
                                                                                                    Variable(
                                                                                                        Identifier(
                                                                                                            "hmid",
                                                                                                        ),
                                                                                                    ),
                                                                                                ),
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                ],
                                                                            },
                                                                        ),
                                                                    ),
                                                                },
                                                            ),
                                                        ),
                                                    ],
                                                },
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                Variable(
                                                    Identifier(
                                                        "tmid",
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Vec3,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "getPixel",
                            ),
                            parameters: [
                                Named(
                                    Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        In,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec2,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "coord",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    None,
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Float,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "time",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec2,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "uv",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Binary(
                                                                Div,
                                                                Variable(
                                                                    Identifier(
                                                                        "coord",
                                                                    ),
                                                                ),
                                                                Dot(
                                                                    Variable(
                                                                        Identifier(
                                                                            "iResolution",
                                                                        ),
                                                                    ),
                                                                    Identifier(
                                                                        "xy",
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Variable(
                                                    Identifier(
                                                        "uv",
                                                    ),
                                                ),
                                                Equal,
                                                Binary(
                                                    Sub,
                                                    Binary(
                                                        Mult,
                                                        Variable(
                                                            Identifier(
                                                                "uv",
                                                            ),
                                                        ),
                                                        FloatConst(
                                                            2.0,
                                                        ),
                                                    ),
                                                    FloatConst(
                                                        1.0,
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Dot(
                                                    Variable(
                                                        Identifier(
                                                            "uv",
                                                        ),
                                                    ),
                                                    Identifier(
                                                        "x",
                                                    ),
                                                ),
                                                Mult,
                                                Binary(
                                                    Div,
                                                    Dot(
                                                        Variable(
                                                            Identifier(
                                                                "iResolution",
                                                            ),
                                                        ),
                                                        Identifier(
                                                            "x",
                                                        ),
                                                    ),
                                                    Dot(
                                                        Variable(
                                                            Identifier(
                                                                "iResolution",
                                                            ),
                                                        ),
                                                        Identifier(
                                                            "y",
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "ang",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "vec3",
                                                                    ),
                                                                ),
                                                                [
                                                                    Binary(
                                                                        Mult,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "sin",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Binary(
                                                                                    Mult,
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "time",
                                                                                        ),
                                                                                    ),
                                                                                    FloatConst(
                                                                                        3.0,
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                        FloatConst(
                                                                            0.1,
                                                                        ),
                                                                    ),
                                                                    Binary(
                                                                        Add,
                                                                        Binary(
                                                                            Mult,
                                                                            FunCall(
                                                                                Identifier(
                                                                                    Identifier(
                                                                                        "sin",
                                                                                    ),
                                                                                ),
                                                                                [
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "time",
                                                                                        ),
                                                                                    ),
                                                                                ],
                                                                            ),
                                                                            FloatConst(
                                                                                0.2,
                                                                            ),
                                                                        ),
                                                                        FloatConst(
                                                                            0.3,
                                                                        ),
                                                                    ),
                                                                    Variable(
                                                                        Identifier(
                                                                            "time",
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "ori",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "vec3",
                                                                    ),
                                                                ),
                                                                [
                                                                    FloatConst(
                                                                        0.0,
                                                                    ),
                                                                    FloatConst(
                                                                        3.5,
                                                                    ),
                                                                    Binary(
                                                                        Mult,
                                                                        Variable(
                                                                            Identifier(
                                                                                "time",
                                                                            ),
                                                                        ),
                                                                        FloatConst(
                                                                            5.0,
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "dir",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "normalize",
                                                                    ),
                                                                ),
                                                                [
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "vec3",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            Dot(
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "uv",
                                                                                    ),
                                                                                ),
                                                                                Identifier(
                                                                                    "xy",
                                                                                ),
                                                                            ),
                                                                            Unary(
                                                                                Minus,
                                                                                FloatConst(
                                                                                    2.0,
                                                                                ),
                                                                            ),
                                                                        ],
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Dot(
                                                    Variable(
                                                        Identifier(
                                                            "dir",
                                                        ),
                                                    ),
                                                    Identifier(
                                                        "z",
                                                    ),
                                                ),
                                                Add,
                                                Binary(
                                                    Mult,
                                                    FunCall(
                                                        Identifier(
                                                            Identifier(
                                                                "length",
                                                            ),
                                                        ),
                                                        [
                                                            Variable(
                                                                Identifier(
                                                                    "uv",
                                                                ),
                                                            ),
                                                        ],
                                                    ),
                                                    FloatConst(
                                                        0.14,
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Variable(
                                                    Identifier(
                                                        "dir",
                                                    ),
                                                ),
                                                Equal,
                                                Binary(
                                                    Mult,
                                                    FunCall(
                                                        Identifier(
                                                            Identifier(
                                                                "normalize",
                                                            ),
                                                        ),
                                                        [
                                                            Variable(
                                                                Identifier(
                                                                    "dir",
                                                                ),
                                                            ),
                                                        ],
                                                    ),
                                                    FunCall(
                                                        Identifier(
                                                            Identifier(
                                                                "fromEuler",
                                                            ),
                                                        ),
                                                        [
                                                            Variable(
                                                                Identifier(
                                                                    "ang",
                                                                ),
                                                            ),
                                                        ],
                                                    ),
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "p",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: None,
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            FunCall(
                                                Identifier(
                                                    Identifier(
                                                        "heightMapTracing",
                                                    ),
                                                ),
                                                [
                                                    Variable(
                                                        Identifier(
                                                            "ori",
                                                        ),
                                                    ),
                                                    Variable(
                                                        Identifier(
                                                            "dir",
                                                        ),
                                                    ),
                                                    Variable(
                                                        Identifier(
                                                            "p",
                                                        ),
                                                    ),
                                                ],
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "dist",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Binary(
                                                                Sub,
                                                                Variable(
                                                                    Identifier(
                                                                        "p",
                                                                    ),
                                                                ),
                                                                Variable(
                                                                    Identifier(
                                                                        "ori",
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "n",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "getNormal",
                                                                    ),
                                                                ),
                                                                [
                                                                    Variable(
                                                                        Identifier(
                                                                            "p",
                                                                        ),
                                                                    ),
                                                                    Binary(
                                                                        Mult,
                                                                        FunCall(
                                                                            Identifier(
                                                                                Identifier(
                                                                                    "dot",
                                                                                ),
                                                                            ),
                                                                            [
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "dist",
                                                                                    ),
                                                                                ),
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "dist",
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        ),
                                                                        Variable(
                                                                            Identifier(
                                                                                "EPSILON_NRM",
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "light",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "normalize",
                                                                    ),
                                                                ),
                                                                [
                                                                    FunCall(
                                                                        Identifier(
                                                                            Identifier(
                                                                                "vec3",
                                                                            ),
                                                                        ),
                                                                        [
                                                                            FloatConst(
                                                                                0.0,
                                                                            ),
                                                                            FloatConst(
                                                                                1.0,
                                                                            ),
                                                                            FloatConst(
                                                                                0.8,
                                                                            ),
                                                                        ],
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Jump(
                                        Return(
                                            Some(
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "mix",
                                                        ),
                                                    ),
                                                    [
                                                        FunCall(
                                                            Identifier(
                                                                Identifier(
                                                                    "getSkyColor",
                                                                ),
                                                            ),
                                                            [
                                                                Variable(
                                                                    Identifier(
                                                                        "dir",
                                                                    ),
                                                                ),
                                                            ],
                                                        ),
                                                        FunCall(
                                                            Identifier(
                                                                Identifier(
                                                                    "getSeaColor",
                                                                ),
                                                            ),
                                                            [
                                                                Variable(
                                                                    Identifier(
                                                                        "p",
                                                                    ),
                                                                ),
                                                                Variable(
                                                                    Identifier(
                                                                        "n",
                                                                    ),
                                                                ),
                                                                Variable(
                                                                    Identifier(
                                                                        "light",
                                                                    ),
                                                                ),
                                                                Variable(
                                                                    Identifier(
                                                                        "dir",
                                                                    ),
                                                                ),
                                                                Variable(
                                                                    Identifier(
                                                                        "dist",
                                                                    ),
                                                                ),
                                                            ],
                                                        ),
                                                        FunCall(
                                                            Identifier(
                                                                Identifier(
                                                                    "pow",
                                                                ),
                                                            ),
                                                            [
                                                                FunCall(
                                                                    Identifier(
                                                                        Identifier(
                                                                            "smoothstep",
                                                                        ),
                                                                    ),
                                                                    [
                                                                        FloatConst(
                                                                            0.0,
                                                                        ),
                                                                        Unary(
                                                                            Minus,
                                                                            FloatConst(
                                                                                0.02,
                                                                            ),
                                                                        ),
                                                                        Dot(
                                                                            Variable(
                                                                                Identifier(
                                                                                    "dir",
                                                                                ),
                                                                            ),
                                                                            Identifier(
                                                                                "y",
                                                                            ),
                                                                        ),
                                                                    ],
                                                                ),
                                                                FloatConst(
                                                                    0.2,
                                                                ),
                                                            ],
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
                FunctionDefinition(
                    FunctionDefinition {
                        prototype: FunctionPrototype {
                            ty: FullySpecifiedType {
                                qualifier: None,
                                ty: TypeSpecifier {
                                    ty: Void,
                                    array_specifier: None,
                                },
                            },
                            name: Identifier(
                                "mainImage",
                            ),
                            parameters: [
                                Named(
                                    Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        Out,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec4,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "fragColor",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                                Named(
                                    Some(
                                        TypeQualifier {
                                            qualifiers: NonEmpty(
                                                [
                                                    Storage(
                                                        In,
                                                    ),
                                                ],
                                            ),
                                        },
                                    ),
                                    FunctionParameterDeclarator {
                                        ty: TypeSpecifier {
                                            ty: Vec2,
                                            array_specifier: None,
                                        },
                                        ident: ArrayedIdentifier {
                                            ident: Identifier(
                                                "fragCoord",
                                            ),
                                            array_spec: None,
                                        },
                                    },
                                ),
                            ],
                        },
                        statement: CompoundStatement {
                            statement_list: [
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Float,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "time",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            Binary(
                                                                Add,
                                                                Binary(
                                                                    Mult,
                                                                    Variable(
                                                                        Identifier(
                                                                            "iTime",
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        0.3,
                                                                    ),
                                                                ),
                                                                Binary(
                                                                    Mult,
                                                                    Dot(
                                                                        Variable(
                                                                            Identifier(
                                                                                "iMouse",
                                                                            ),
                                                                        ),
                                                                        Identifier(
                                                                            "x",
                                                                        ),
                                                                    ),
                                                                    FloatConst(
                                                                        0.01,
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Declaration(
                                        InitDeclaratorList(
                                            InitDeclaratorList {
                                                head: SingleDeclaration {
                                                    ty: FullySpecifiedType {
                                                        qualifier: None,
                                                        ty: TypeSpecifier {
                                                            ty: Vec3,
                                                            array_specifier: None,
                                                        },
                                                    },
                                                    name: Some(
                                                        Identifier(
                                                            "color",
                                                        ),
                                                    ),
                                                    array_specifier: None,
                                                    initializer: Some(
                                                        Simple(
                                                            FunCall(
                                                                Identifier(
                                                                    Identifier(
                                                                        "vec3",
                                                                    ),
                                                                ),
                                                                [
                                                                    FloatConst(
                                                                        0.0,
                                                                    ),
                                                                ],
                                                            ),
                                                        ),
                                                    ),
                                                },
                                                tail: [],
                                            },
                                        ),
                                    ),
                                ),
                                Simple(
                                    Iteration(
                                        For(
                                            Declaration(
                                                InitDeclaratorList(
                                                    InitDeclaratorList {
                                                        head: SingleDeclaration {
                                                            ty: FullySpecifiedType {
                                                                qualifier: None,
                                                                ty: TypeSpecifier {
                                                                    ty: Int,
                                                                    array_specifier: None,
                                                                },
                                                            },
                                                            name: Some(
                                                                Identifier(
                                                                    "i",
                                                                ),
                                                            ),
                                                            array_specifier: None,
                                                            initializer: Some(
                                                                Simple(
                                                                    Unary(
                                                                        Minus,
                                                                        IntConst(
                                                                            1,
                                                                        ),
                                                                    ),
                                                                ),
                                                            ),
                                                        },
                                                        tail: [],
                                                    },
                                                ),
                                            ),
                                            ForRestStatement {
                                                condition: Some(
                                                    Expr(
                                                        Binary(
                                                            LTE,
                                                            Variable(
                                                                Identifier(
                                                                    "i",
                                                                ),
                                                            ),
                                                            IntConst(
                                                                1,
                                                            ),
                                                        ),
                                                    ),
                                                ),
                                                post_expr: Some(
                                                    PostInc(
                                                        Variable(
                                                            Identifier(
                                                                "i",
                                                            ),
                                                        ),
                                                    ),
                                                ),
                                            },
                                            Compound(
                                                CompoundStatement {
                                                    statement_list: [
                                                        Simple(
                                                            Iteration(
                                                                For(
                                                                    Declaration(
                                                                        InitDeclaratorList(
                                                                            InitDeclaratorList {
                                                                                head: SingleDeclaration {
                                                                                    ty: FullySpecifiedType {
                                                                                        qualifier: None,
                                                                                        ty: TypeSpecifier {
                                                                                            ty: Int,
                                                                                            array_specifier: None,
                                                                                        },
                                                                                    },
                                                                                    name: Some(
                                                                                        Identifier(
                                                                                            "j",
                                                                                        ),
                                                                                    ),
                                                                                    array_specifier: None,
                                                                                    initializer: Some(
                                                                                        Simple(
                                                                                            Unary(
                                                                                                Minus,
                                                                                                IntConst(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                },
                                                                                tail: [],
                                                                            },
                                                                        ),
                                                                    ),
                                                                    ForRestStatement {
                                                                        condition: Some(
                                                                            Expr(
                                                                                Binary(
                                                                                    LTE,
                                                                                    Variable(
                                                                                        Identifier(
                                                                                            "j",
                                                                                        ),
                                                                                    ),
                                                                                    IntConst(
                                                                                        1,
                                                                                    ),
                                                                                ),
                                                                            ),
                                                                        ),
                                                                        post_expr: Some(
                                                                            PostInc(
                                                                                Variable(
                                                                                    Identifier(
                                                                                        "j",
                                                                                    ),
                                                                                ),
                                                                            ),
                                                                        ),
                                                                    },
                                                                    Compound(
                                                                        CompoundStatement {
                                                                            statement_list: [
                                                                                Simple(
                                                                                    Declaration(
                                                                                        InitDeclaratorList(
                                                                                            InitDeclaratorList {
                                                                                                head: SingleDeclaration {
                                                                                                    ty: FullySpecifiedType {
                                                                                                        qualifier: None,
                                                                                                        ty: TypeSpecifier {
                                                                                                            ty: Vec2,
                                                                                                            array_specifier: None,
                                                                                                        },
                                                                                                    },
                                                                                                    name: Some(
                                                                                                        Identifier(
                                                                                                            "uv",
                                                                                                        ),
                                                                                                    ),
                                                                                                    array_specifier: None,
                                                                                                    initializer: Some(
                                                                                                        Simple(
                                                                                                            Binary(
                                                                                                                Add,
                                                                                                                Variable(
                                                                                                                    Identifier(
                                                                                                                        "fragCoord",
                                                                                                                    ),
                                                                                                                ),
                                                                                                                Binary(
                                                                                                                    Div,
                                                                                                                    FunCall(
                                                                                                                        Identifier(
                                                                                                                            Identifier(
                                                                                                                                "vec2",
                                                                                                                            ),
                                                                                                                        ),
                                                                                                                        [
                                                                                                                            Variable(
                                                                                                                                Identifier(
                                                                                                                                    "i",
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                            Variable(
                                                                                                                                Identifier(
                                                                                                                                    "j",
                                                                                                                                ),
                                                                                                                            ),
                                                                                                                        ],
                                                                                                                    ),
                                                                                                                    FloatConst(
                                                                                                                        3.0,
                                                                                                                    ),
                                                                                                                ),
                                                                                                            ),
                                                                                                        ),
                                                                                                    ),
                                                                                                },
                                                                                                tail: [],
                                                                                            },
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                                Simple(
                                                                                    Expression(
                                                                                        Some(
                                                                                            Assignment(
                                                                                                Variable(
                                                                                                    Identifier(
                                                                                                        "color",
                                                                                                    ),
                                                                                                ),
                                                                                                Add,
                                                                                                FunCall(
                                                                                                    Identifier(
                                                                                                        Identifier(
                                                                                                            "getPixel",
                                                                                                        ),
                                                                                                    ),
                                                                                                    [
                                                                                                        Variable(
                                                                                                            Identifier(
                                                                                                                "uv",
                                                                                                            ),
                                                                                                        ),
                                                                                                        Variable(
                                                                                                            Identifier(
                                                                                                                "time",
                                                                                                            ),
                                                                                                        ),
                                                                                                    ],
                                                                                                ),
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        },
                                                                    ),
                                                                ),
                                                            ),
                                                        ),
                                                    ],
                                                },
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Variable(
                                                    Identifier(
                                                        "color",
                                                    ),
                                                ),
                                                Div,
                                                FloatConst(
                                                    9.0,
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                                Simple(
                                    Expression(
                                        Some(
                                            Assignment(
                                                Variable(
                                                    Identifier(
                                                        "fragColor",
                                                    ),
                                                ),
                                                Equal,
                                                FunCall(
                                                    Identifier(
                                                        Identifier(
                                                            "vec4",
                                                        ),
                                                    ),
                                                    [
                                                        FunCall(
                                                            Identifier(
                                                                Identifier(
                                                                    "pow",
                                                                ),
                                                            ),
                                                            [
                                                                Variable(
                                                                    Identifier(
                                                                        "color",
                                                                    ),
                                                                ),
                                                                FunCall(
                                                                    Identifier(
                                                                        Identifier(
                                                                            "vec3",
                                                                        ),
                                                                    ),
                                                                    [
                                                                        FloatConst(
                                                                            0.65,
                                                                        ),
                                                                    ],
                                                                ),
                                                            ],
                                                        ),
                                                        FloatConst(
                                                            1.0,
                                                        ),
                                                    ],
                                                ),
                                            ),
                                        ),
                                    ),
                                ),
                            ],
                        },
                    },
                ),
            ],
        ),
    ),
)
